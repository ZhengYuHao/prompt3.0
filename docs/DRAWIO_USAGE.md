# 系统Approach图使用说明

## 文件信息

- **文件名**: `system_approach.drawio`
- **文件大小**: 27KB
- **格式**: draw.io原生XML格式
- **XML验证**: ✅ 通过

## 快速开始

### 方法1: 在draw.io中打开（推荐）

1. **下载文件**
   ```bash
   # 文件已保存在当前目录
   system_approach.drawio
   ```

2. **打开draw.io**
   - 访问: https://app.diagrams.net/
   - 或下载桌面版: https://github.com/jgraph/drawio-desktop/releases

3. **导入文件**
   - 点击 "文件" → "从设备导入" (File → Import from Device)
   - 或直接将 `.drawio` 文件拖拽到浏览器窗口中

4. **查看和编辑**
   - 可以缩放查看整体结构
   - 可以点击节点查看详细信息
   - 可以编辑文本或调整布局

### 方法2: 在线预览

1. 访问 https://app.diagrams.net/
2. 选择 "从文件打开" (Open from Device)
3. 上传 `system_approach.drawio` 文件

## 图表内容

### 核心流程

```
自然语言输入
    ↓
Stage 1: Text Understanding (Prompt 1.0)
    - 分词与预处理
    - 语义分析
    - 文本规范化 (Rule Engine)
    - 歧义检测 (Rule + LLM)
    - LLM检查
    ↓
Stage 2: Structured Extraction (Prompt 2.0)
    - 模式匹配 (Regex)
    - 实体识别
    - 变量提取
    - 冲突解决 (Deduplication)
    - LLM检查
    ↓
Stage 3: DSL Generation (Prompt 3.0)
    - 模板生成
    - 逻辑转译
    - DSL构建
    - 验证 (Code Layer)
    - LLM转译
    ↓
DSL代码 → 可执行代码
```

### 优化策略层

位于图表右侧，展示优化策略如何影响主流程：

- **Narrow-LLM原则**: Code-First, Rule-Based, LLM as Fallback
- **规则引擎**: 处理口语填充词、标点规范化、数字模式、技术栈模式
- **正则提取器**: 时长模式、计数模式、技术模式、合并策略
- **缓存机制**: 响应缓存、基于Hash的键、文件持久化
- **LLM编排器**: 回退逻辑、调用优化、成本追踪
- **指标追踪**: LLM调用次数、Token节省、成本降低
- **性能提升**: 速度提升1.5-2倍、准确率95%+、可解释性100%

### 设计哲学

位于图表底部：

1. **Narrow-LLM**: LLM仅作为复杂任务的最后手段
2. **Code-First**: 简单任务由确定性规则和正则处理
3. **Explainability**: 每个转换都是可追踪和可解释的

### 图例

- **实线箭头**: 数据流
- **粉色虚线箭头**: LLM调用（优化后）
- **绿色虚线箭头**: 优化影响

## 颜色编码

| 颜色 | 含义 |
|------|------|
| 🟠 橙色 | 输入/输出节点 |
| 🔵 蓝色 | 标准处理步骤 |
| 🟢 绿色 | 优化/代码层处理 |
| 🟣 紫色 | LLM调用步骤 |
| 🟡 黄色 | 设计哲学区域 |

## 图表用途

这个Approach图适合用于：

- ✅ **科研汇报**: 展示系统架构和设计思路
- ✅ **技术文档**: 说明系统各组件之间的关系
- ✅ **团队讨论**: 可视化展示优化策略
- ✅ **论文配图**: 高质量的架构图
- ✅ **项目评审**: 清晰展示系统设计

## 故障排查

### 问题1: 文件无法打开

**解决方案:**
1. 确认文件大小为27KB（完整的文件）
2. 确认XML格式正确（已通过验证）
3. 尝试清除浏览器缓存
4. 使用最新版本的draw.io

### 问题2: 显示乱码

**解决方案:**
1. 确认使用UTF-8编码
2. 重新下载文件
3. 尝试不同的浏览器

### 问题3: 布局混乱

**解决方案:**
1. 在draw.io中点击 "排列" → "自动布局" (Arrange → Auto Layout)
2. 或手动调整节点位置
3. 使用 "缩放" 查看整体结构

## 导出格式

在draw.io中可以导出为多种格式：

- **PNG/JPG**: 用于论文、演示文稿
- **PDF**: 用于打印或分发
- **SVG**: 用于Web显示
- **VSDX**: 用于Microsoft Visio

## 技术支持

如果遇到问题，请检查：

1. ✅ XML格式验证通过
2. ✅ 文件完整（27KB）
3. ✅ 使用最新版draw.io
4. ✅ 浏览器支持（推荐Chrome/Firefox）

---

**更新时间**: 2026-02-07
**版本**: 1.0
**作者**: AI Agent
