# Demo Full Pipeline 使用说明

## 功能概述

`demo_full_pipeline.py` 是一个完整的流水线演示程序，展示从口语化输入到结构化模板的完整转换过程。现在支持**从本地 txt 文件读取输入**，不再局限于硬编码的输入内容。

## 使用方法

### 1. 使用默认输入

直接运行脚本，使用代码中硬编码的默认输入：

```bash
python3 demo_full_pipeline.py
```

### 2. 从文件读取输入

指定本地 txt 文件路径作为参数：

```bash
python3 demo_full_pipeline.py <文件路径>
```

示例：

```bash
# 使用示例文件
python3 demo_full_pipeline.py input_example.txt

# 使用自定义文件
python3 demo_full_pipeline.py my_input.txt

# 使用相对路径
python3 demo_full_pipeline.py ./inputs/system_design.txt
```

### 3. 文件格式要求

- **文件格式**: 纯文本文件 (`.txt`)
- **编码**: UTF-8
- **内容**: 任意中文或英文的需求描述文本

示例文件内容 (`input_example.txt`):

```text
帮我设计一个微服务架构的电商平台，需要支持高并发和分布式事务处理。

首先，系统需要包含以下核心服务：用户服务、商品服务、订单服务、支付服务、库存服务。
...
```

## 错误处理

程序内置了完善的错误处理机制：

| 错误情况 | 处理方式 |
|---------|---------|
| 文件不存在 | 显示错误信息，自动回退到默认输入 |
| 文件为空 | 显示警告信息，自动回退到默认输入 |
| 文件扩展名不是 .txt | 显示警告信息，但继续读取文件 |
| 文件编码错误 | 显示错误信息，自动回退到默认输入 |

## 输出信息

程序会输出以下信息：

1. **输入来源提示**: 显示是从文件读取还是使用默认输入
2. **文件信息**: 文件路径和内容长度
3. **流水线处理过程**: 包括预处理、结构化、DSL 编译、代码生成等各阶段的详细信息

## 示例输出

```
2026-01-31 11:20:13 | INFO | 📂 尝试从文件读取输入: input_example.txt
2026-01-31 11:20:13 | INFO | ✅ 成功读取文件: input_example.txt
2026-01-31 11:20:13 | INFO | 📄 文件内容长度: 674 字符

================================================================================
使用从文件读取的输入
================================================================================

████████████████████████████████████████████████████████████████████████████████
█                              完整流水线演示                                █
█                    预处理模块 + 结构化模块 协同工作                  █
████████████████████████████████████████████████████████████████████████████████
...
```

## 提示

- 首次运行时，程序会提示：`💡 提示: 使用 'python3 demo_full_pipeline.py <文件路径>' 从文件读取输入`
- 建议创建自己的输入文件来测试不同的需求场景
- 输入文件可以是任何中文或英文的需求描述，程序会自动进行预处理和结构化
