"""
Auto-generated by WaAct Compiler
DO NOT EDIT THIS FILE MANUALLY
"""

from typing import Dict, Any
from llm_client import invoke_function  # 需要实现 LLM 客户端
from logger import info


def step_1_compute_level(experience_years):
    """Auto-generated module"""
    if experience_years > 3
    level = "Expert"
    complexity = 0.9
    else:
    level = "Novice"
    complexity = 0.3
    return complexity, level


async def step_2_generate_outline(complexity, level):
    """Auto-generated module"""
    outline = await invoke_function('generate_outline', level=level, complexity=complexity)
    return outline


async def step_3_expand_content(outline):
    """Auto-generated module"""
    content = await invoke_function('expand_content', outline=outline)
    return content


async def step_4_polish_text(content, level):
    """Auto-generated module"""
    final_doc = await invoke_function('polish_text', content=content, level=level)
    return final_doc


async def main_workflow(input_params: dict):
    """
    主工作流 - 自动生成
    
    Args:
        input_params: 包含 ['experience_years'] 的字典
    
    Returns:
        执行结果上下文
    """
    # 初始化上下文
    ctx = input_params.copy()

    # Module 1: step_1_compute_level
    ctx["complexity"], ctx["level"] = await step_1_compute_level(ctx.get("experience_years"))

    # Module 2: step_2_generate_outline
    ctx["outline"] = await step_2_generate_outline(ctx.get("complexity"), ctx.get("level"))

    # Module 3: step_3_expand_content
    ctx["content"] = await step_3_expand_content(ctx.get("outline"))

    # Module 4: step_4_polish_text
    ctx["final_doc"] = await step_4_polish_text(ctx.get("content"), ctx.get("level"))

    return ctx



if __name__ == "__main__":
    import asyncio
    
    # 测试输入
    test_input = {
        # TODO: 填充实际参数
    }
    
    result = asyncio.run(main_workflow(test_input))
    info("执行结果:", result)